{% assign widths_ar = widths | split: ', ' %}
<picture class="banner__picture">
  <source
    srcset="
      {% for width in widths_ar -%}
        {{ image | image_url: width: width }}&quality={{ hi_res_quality }} {{width}}w,
      {% endfor %}
      {{ image | image_url: width: widths_ar[-1] }}&quality={{ hi_res_quality }}
    "
    sizes="{{sizes}}"
    media="(min-resolution: 2dppx)"
    width="{{ image.width }}"
    height="{{ image_height }}"
  />
  {{
    image
    | image_url: width: 3840
    | image_tag:
      loading: 'lazy',
      width: image.width,
      height: image_height,
      class: image_class,
      sizes: sizes,
      widths: widths
  }}
</picture>
